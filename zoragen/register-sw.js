(()=>{"use strict";const a=window,b=a.navigator,c="serviceWorker"in b,d=a.location.hostname,e=()=>"localhost"==d||"[::1]"==d||/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/.test(d),i=(l,m)=>b.serviceWorker.register(l).then(o=>(m("registered",o),o.waiting?m("updated",o):o.onupdatefound=()=>{m("updatefound",o);const p=o.installing;p.onstatechange=()=>"installed"==p.state?b.serviceWorker.controller?m("updated",o):m("cached",o):0})).catch(o=>m("error",o)),j=(l,m)=>fetch(l).then(o=>404==o.status||!~o.headers.get("content-type").indexOf("javascript")?(m("error",new Error("Service worker not found at "+l)),k()):i(l,m)).catch(o=>b.onLine?m("error",o):m("offline")),k=()=>c&&b.serviceWorker.ready.then(l=>l.unregister());a.registerServiceWorker={register:(swPath,hooks)=>{const l=swPath,m=hooks,o=(p,...q)=>{const r=m&&m[p];"function"==typeof r&&r.apply(m,q)};c&&a.addEventListener("load",()=>e()?(j(l,o),b.serviceWorker.ready.then(p=>o("ready",p))):i(l,o))},unregister:k}})();
